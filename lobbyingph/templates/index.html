{% extends "base.html" %}
{% load humanize %}

{% block content %}
  <div class="container">
    <div class="index-header">
        <div class="intro">
            <p>
                Beginning in 2012, organizations paying for lobbying services in Philadelphia are required to register and file quarterly reports of their expenses with the City of Philadelphia Board of Ethics. This application seeks to catalog that data, make it more accesible, and host visualizations to help citizens better understand the influence of lobbying in Philadelphia.
            </p>
            <p>
                Expenditure data through March, 2012 has been imported.
            </p>
        </div>
        <div class="tally">
            <h2>Total spent on Lobbying through March 2012: ${{ total_spending|intcomma }}</h2>
            <h2>{{ lobbyist_count }} Lobbyists</h2>
            <h2>{{ firm_count }} Firms</h2>
            <h2>{{ principal_count }} Principals</h2>
        </div>
    </div>
    <div class="totals">
        <div class="list">
            <h3>Firms by clients</h3>
            <ol>
                {% for f in top_firms %}
                    <li><a href="/firms/{{ f.id }}">{{ f.name }}</a>, {{ f.get_num_clients }}</li>
                {% endfor %}
            </ol>
        </div>
        <div class="list">
            <h3>Principals by spending</h3>
            <ol>
                {% for p in top_principals_by_spending %}
                    <li><a href="/principals/{{ p.id }}">{{ p.name }}</a>, ${{ p.get_total_exp|intcomma }}</li>
                {% endfor %}
            </ol>
        </div>
        <div class="list">
            <h3>Principals by issue + bill count</h3>
            <ol>
                {% for p in top_principals_by_issues %}
                    <li><a href="/principals/{{ p.id }}">{{ p.name }}</a>, {{ p.get_issue_bill_count }}</li>
                {% endfor %}
            </ol>
        </div>
    </div>
  </div>
{% endblock %}
